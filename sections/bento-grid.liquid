{{ 'section-bento-grid.css' | asset_url | stylesheet_tag }}

<div class="section-bento-grid">
  <div class="bento-grid-wrapper page-width">
    <div class="bento-grid" style="gap: {{ section.settings.grid_gap }}px;">
      {%- for block in section.blocks -%}
        <div
          class="bento-item bento-col-span-{{ block.settings.column_span }} bento-row-span-{{ block.settings.row_span }} bento-shape-{{ block.settings.card_shape }}"
          {{ block.shopify_attributes }}
        >
          <div class="bento-item__image-container">
            {%- if block.settings.image != blank -%}
              {{
                block.settings.image
                | image_url: width: 800
                | image_tag: class: 'bento-item__image', widths: '300, 600, 800', loading: 'lazy'
              }}
            {%- elsif block.settings.external_image_url != blank -%}
              <img
                src="{{ block.settings.external_image_url }}"
                class="bento-item__image"
                alt="{{ block.settings.heading | escape }}"
                loading="lazy"
                width="800"
                height="600"
              >
            {%- else -%}
              {{ 'image' | placeholder_svg_tag: 'bento-item__image placeholder-svg' }}
            {%- endif -%}
          </div>

          <div class="bento-item__content">
            {%- if block.settings.heading != blank -%}
              <h3 class="bento-item__heading">{{ block.settings.heading }}</h3>
            {%- endif -%}
          </div>

          {%- if block.settings.link != blank -%}
            <a
              href="{{ block.settings.link }}"
              style="position:absolute; top:0; left:0; width:100%; height:100%; z-index: 4;"
            ></a>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Bento Grid",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Grid Gap",
      "default": 16
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Bento Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "external_image_url",
          "label": "External Image URL"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Card Title"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "card_shape",
          "label": "Card Shape",
          "options": [
            { "value": "rectangle", "label": "Rectangle" },
            { "value": "l_cut_bottom_right", "label": "L-Shape (Cut Bottom Right)" },
            { "value": "l_cut_bottom_left", "label": "L-Shape (Cut Bottom Left)" },
            { "value": "l_cut_top_right", "label": "L-Shape (Cut Top Right)" },
            { "value": "l_cut_top_left", "label": "L-Shape (Cut Top Left)" }
          ],
          "default": "rectangle"
        },
        {
          "type": "select",
          "id": "column_span",
          "label": "Column Span (1-10)",
          "options": [
            { "value": "1", "label": "1 Unit (1/10)" },
            { "value": "2", "label": "2 Units (1/5)" },
            { "value": "3", "label": "3 Units (3/10)" },
            { "value": "4", "label": "4 Units (2/5)" },
            { "value": "5", "label": "5 Units (1/2)" },
            { "value": "6", "label": "6 Units (3/5)" },
            { "value": "7", "label": "7 Units (7/10)" },
            { "value": "8", "label": "8 Units (4/5)" },
            { "value": "9", "label": "9 Units (9/10)" },
            { "value": "10", "label": "10 Units (Full)" }
          ],
          "default": "2"
        },
        {
          "type": "select",
          "id": "row_span",
          "label": "Row Span (1-10)",
          "options": [
            { "value": "1", "label": "1 Unit" },
            { "value": "2", "label": "2 Units" },
            { "value": "3", "label": "3 Units" },
            { "value": "4", "label": "4 Units" },
            { "value": "5", "label": "5 Units" },
            { "value": "6", "label": "6 Units" },
            { "value": "7", "label": "7 Units" },
            { "value": "8", "label": "8 Units" },
            { "value": "9", "label": "9 Units" },
            { "value": "10", "label": "10 Units" }
          ],
          "default": "2"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Bento Grid"
    }
  ]
}
{% endschema %}
